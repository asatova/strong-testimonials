"use strict";function loadScript(a,b){if("object"==typeof window){let c=document.createElement("script");c.type="text/javascript",c.src=a,c.onload=function(){b&&b()},document.head.appendChild(c)}else"function"==typeof importScripts&&(importScripts(a),b&&b())}function currentScriptPath(){try{throw new Error("")}catch(a){let b=a.stack,c=null;return c=-1===b.indexOf("@")?b.split("(")[1].split(")")[0]:b.split("@")[1].split("\n")[0],c=c.substring(0,c.lastIndexOf("/"))+"/",c}}let unrarMemoryFileLocation=null,g_on_loaded_cb=null;(function(){function a(a,b){let c="";for(let d=0;d<a.length;++d)c+=0==d?a[d]:b+a[d];return c}function b(a,b){let c=Array(a.length);for(let d=0;d<c.length;++d)c[d]=b(a[d]);return c}function c(a,b,c){let m=null;if(j(c))m="rar";else if(k(c))m="zip";else if(l(c))m="tar";else throw new Error("The archive type is unknown");let n=null,o=[];try{"rar"===m?(n=d(a,b,c),o=g(n)):"zip"===m?(n=e(a,b,c),o=h(n)):"tar"===m?(n=f(a,b,c),o=i(n)):void 0}catch(a){throw new Error("Failed to open '"+m+"' archive.")}return o.sort(function(c,a){return c.name<a.name?-1:c.name>a.name?1:0}),{file_name:a,archive_type:m,array_buffer:c,entries:o,handle:n}}function d(a,b,c){let d=[{name:a,size:c.byteLength,type:"",content:new Uint8Array(c)}];return{file_name:a,array_buffer:c,password:b,rar_files:d}}function e(a,b,c){let d=new JSZip(c);return{file_name:a,array_buffer:c,password:b,zip:d}}function f(a,b,c){return{file_name:a,array_buffer:c,password:b}}function g(a){let b=readRARFileNames(a.rar_files,a.password),c=[];return Object.keys(b).forEach(function(d){let e=b[d].name,f=b[d].is_file;c.push({name:e,is_file:b[d].is_file,size_compressed:b[d].size_compressed,size_uncompressed:b[d].size_uncompressed,readData:function(b){setTimeout(function(){if(f)try{readRARContent(a.rar_files,a.password,e,b)}catch(a){b(null,a)}else b(null,null)},0)}})}),c}function h(a){let b=a.zip,c=[];return Object.keys(b.files).forEach(function(a){let d=b.files[a],e=d.name,f=!d.dir,g=d._data?d._data.compressedSize:0,h=d._data?d._data.uncompressedSize:0;c.push({name:e,is_file:f,size_compressed:g,size_uncompressed:h,readData:function(a){setTimeout(function(){if(f){let b=d.asArrayBuffer();a(b,null)}else a(null,null)},0)}})}),c}function i(a){let b=tarGetEntries(a.file_name,a.array_buffer),c=[];return b.forEach(function(b){let d=b.name,e=b.is_file,f=b.size;c.push({name:d,is_file:e,size_compressed:f,size_uncompressed:f,readData:function(c){setTimeout(function(){if(e){let d=tarGetEntryData(b,a.array_buffer);c(d.buffer,null)}else c(null,null)},0)}})}),c}function j(b){let c=a([82,69,126,94],", "),d=a([82,97,114,33,26,7,0],", "),e=a([82,97,114,33,26,7,1,0],", ");if(8>b.byteLength)return!1;let f=a(new Uint8Array(b).slice(0,4),", "),g=a(new Uint8Array(b).slice(0,7),", "),h=a(new Uint8Array(b).slice(0,8),", ");return f===c||g===d||h===e}function k(b){let c=a([80,75,3,4],", ");if(4>b.byteLength)return!1;let d=a(new Uint8Array(b).slice(0,4),", ");return d===c}function l(c){let d=a(["u","s","t","a","r"],", ");if(512>c.byteLength)return!1;let e=a(b(new Uint8Array(c).slice(257,262),String.fromCharCode),", ");return e===d}let m=[];"undefined"==typeof Uint8Array||Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(a,b){let c=new Uint8Array(b-a),d=0;for(let e=a;e<b;++e)c[d]=this[e],d++;return c});let n=null;"object"==typeof window?n=window:"function"==typeof importScripts&&(n=self),n.loadArchiveFormats=function(a,b){let c=currentScriptPath(),d=0,e=function(){d++;let c=a.length;-1!==a.indexOf("rar")&&"object"==typeof window&&c++,d===c&&b()};g_on_loaded_cb=e,a.forEach(function(a){if(-1===m.indexOf(a))switch(a){case"rar":unrarMemoryFileLocation=c+"libunrar.js.mem",loadScript(c+"libunrar.js",e),m.push(a);break;case"zip":loadScript(c+"jszip.js",e),m.push(a);break;case"tar":loadScript(c+"libuntar.min.js",e),m.push(a);break;default:throw new Error("Unknown archive format '"+a+"'.");}})},n.archiveOpenFile=function(a,b,d){let e=a.slice(),f=a.name;b=b||null;let g=new FileReader;g.onload=function(){let a=g.result;try{let e=c(f,b,a);d(e,null)}catch(a){d(null,a)}},g.readAsArrayBuffer(a.slice(0,8388608))},n.archiveOpenArrayBuffer=c,n.archiveClose=function(a){a.file_name=null,a.archive_type=null,a.array_buffer=null,a.entries=null,a.handle=null},n.isRarFile=j,n.isZipFile=k,n.isTarFile=l,n.saneJoin=a,n.saneMap=b})();