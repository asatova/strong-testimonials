!function(i){i(function(){var e=i(window);r.initialize(),r.deleteBackups(),r.copyURLToClipBoard(),r.cleanUpUrlAfterBackupRefresh(),r.warnFreeBackupRestoration(),r.checkWidth(e),r.narrowScreens(e)});var r={narrowScreens:function(e){e.resize(function(){r.checkWidth(e)})},checkWidth:function(e){e=e.width();768<e&&e<1280?(i(".js-prime-mover-download-button-backup").html('<span class="dashicons dashicons-download"></span>'),i(".js-prime-mover-restore-icon").html('<span class="dashicons dashicons-backup"></span>'),i(".js-prime-mover-clipboard-button-responsive").html('<span class="dashicons dashicons-migrate"></span>'),i(".js-prime-mover-upgrade-button-simple").html('<span class="dashicons dashicons-cart prime-mover-cart-dashicon"></span>')):(i(".js-prime-mover-download-button-backup").html(prime_mover_js_backups_renderer.download_text),i(".js-prime-mover-restore-icon").html(prime_mover_js_backups_renderer.restore_package_text),i(".js-prime-mover-clipboard-button-responsive").html(prime_mover_js_backups_renderer.copy_restore_url),i(".js-prime-mover-upgrade-button-simple").html(prime_mover_js_backups_renderer.upgradetoprotext))},cleanUpUrlAfterBackupRefresh:function(){i(window).load(function(){r.maybeCleanUpUrl()&&window.history.replaceState({},"Title",prime_mover_js_backups_renderer.backup_menu_url)})},maybeCleanUpUrl:function(){var e="prime_mover_refresh_backups",o=window.location.href;return-1!=o.indexOf("?"+e+"=")||-1!=o.indexOf("&"+e+"=")},initialize:function(){i("body").on("click",".js-prime-mover-clear-site",function(e){i(".js-prime-mover-site-selector").val("")}),i(".js-prime-mover-site-selector").change(function(){i(this).closest("form").submit()})},deleteBackups:function(){i("body").on("click","#doaction, #doaction2",function(e){var o=i("#bulk-action-selector-top").val();"-1"===o&&(o=i("#bulk-action-selector-bottom").val()),"delete"===o&&0!==i("input[name='prime_mover_backup[]']:checkbox:checked").length&&(e.preventDefault(),o="#js-prime-mover-confirm-backups-delete",e=prime_mover_js_backups_renderer.deleteBackupFileWarning,i(o+" span").html(e),r.showDeleteDialog(o))})},warnFreeBackupRestoration:function(){i("body").on("click",".js-prime-mover-restore-free-backups",function(e){e.preventDefault();var o,e=i(this).attr("href");"readonly"===prime_mover_js_backups_renderer.prime_mover_config_writable?(o="#js-prime-mover-block-free-restore-cached-enabled",r.showCachingEnabledErrorRestoreDialog(o)):(o="#js-prime-mover-confirm-backups-free-restore",r.showFreeBackupRestoreDialog(o,e))})},showCachingEnabledErrorRestoreDialog:function(e){i(e).dialog({resizable:!1,height:"auto",minWidth:320,dialogClass:"prime-mover-user-dialog",maxWidth:600,modal:!0,fluid:!0,buttons:[{text:prime_mover_js_backups_renderer.cancelbutton,class:"button-primary",click:function(){i(this).dialog("close")}}],open:function(e,o){i(".prime-mover-user-dialog button").blur()}}),r.handle_responsive_dialog()},showFreeBackupRestoreDialog:function(e,o){i(e).dialog({resizable:!1,height:"auto",minWidth:320,dialogClass:"prime-mover-user-dialog",maxWidth:600,modal:!0,fluid:!0,buttons:[{text:prime_mover_js_backups_renderer.freerestorebutton,class:"button-primary",click:function(){window.location=o}},{text:prime_mover_js_backups_renderer.cancelbutton,click:function(){i(this).dialog("close")}}],open:function(e,o){i(".prime-mover-user-dialog button").blur()}}),r.handle_responsive_dialog()},showDeleteDialog:function(e){i(e).dialog({resizable:!1,height:"auto",minWidth:320,dialogClass:"prime-mover-user-dialog",maxWidth:600,modal:!0,fluid:!0,buttons:[{text:prime_mover_js_backups_renderer.deletebutton,class:"button button-primary",click:function(){i("#prime_mover_backups-filter").submit()}},{text:prime_mover_js_backups_renderer.cancelbutton,click:function(){i(this).dialog("close")}}],open:function(e,o){i(".prime-mover-user-dialog button").blur()}}),r.handle_responsive_dialog()},fluidDialog:function(){i(".ui-dialog:visible").each(function(){var e,o=i(this),r=o.find(".ui-dialog-content").data("ui-dialog");r.options.fluid&&(i(window).width()<parseInt(r.options.maxWidth)+50?o.css("max-width","90%"):(e=.9*parseInt(r.options.maxWidth),o.css("max-width",e+"px")),r.option("position",r.options.position))})},copyURLToClipBoard:function(){new ClipboardJS(".js-prime-mover-copy-clipboard-menu").on("success",function(e){e=i(e.trigger).attr("data-clipboard-id");i("#"+e).fadeIn("fast").delay(3e3).fadeOut()})},handle_responsive_dialog:function(){i(window).resize(function(){r.fluidDialog()}),r.fluidDialog()}}}(jQuery);